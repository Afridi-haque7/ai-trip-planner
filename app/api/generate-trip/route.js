import {
  GoogleGenerativeAI,
} from "@google/generative-ai";

const apiKey = process.env.NEXT_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 7000,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "I want you to act as a travel itinerary planner for the given place. Kindly generate a trip for me for the location: Las Vegas, USA, for 2 persons, in a medium budget and for 3 days. Give me a hotel option list with hotel name, address, price, hotel image url, geo-coordinates, rating, descriptions. Also  generate a day-by-day itinerary for the most famous places of the location, with a list of different places with their pictures url, location details, timings, entry fee(if applicable). Suggest some famous authentic dishes of that place with picture urls. Return all the data in JSON format, so that I can use it in my website. And remember the initial details of location, duration, budget and travelling members.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "tripDetails": {\n    "location": "Las Vegas, USA",\n    "duration": "3 days",\n    "budget": "Medium",\n    "travelers": 2\n  },\n  "hotelOptions": [\n    {\n      "name": "The LINQ Hotel + Experience",\n      "address": "3535 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "Approximately $150 - $250 per night",\n      "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/0f/13/c1/the-linq-hotel-experience.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": 36.1168,\n        "longitude": -115.1708\n      },\n      "rating": 4.0,\n      "description": "Modern hotel with a lively atmosphere, The LINQ Promenade access, and a central Strip location."\n    },\n    {\n      "name": "Park MGM Las Vegas",\n      "address": "3770 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "Approximately $180 - $300 per night",\n      "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/2f/2c/e6/park-mgm-las-vegas.jpg?w=700&h=-1&s=1",\n        "geoCoordinates": {\n          "latitude": 36.1050,\n          "longitude": -115.1722\n        },\n      "rating": 4.2,\n      "description": "Stylish hotel with a focus on dining and entertainment, including the Eataly marketplace."\n    },\n      {\n        "name": "Planet Hollywood Resort & Casino",\n        "address": "3667 S Las Vegas Blvd, Las Vegas, NV 89109",\n         "price": "Approximately $130 - $220 per night",\n        "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/09/e2/ff/planet-hollywood-resort.jpg?w=700&h=-1&s=1",\n          "geoCoordinates": {\n            "latitude": 36.1080,\n            "longitude": -115.1714\n          },\n        "rating": 4.0,\n        "description": "Themed hotel with a vibrant atmosphere, located right on the Las Vegas Strip and known for its entertainment."\n      }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the Iconic Strip",\n      "activities": [\n        {\n          "name": "Bellagio Conservatory & Botanical Gardens",\n          "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/e1/f8/f3/bellagio-conservatory.jpg?w=700&h=-1&s=1",\n          "location": "Bellagio Hotel, 3600 S Las Vegas Blvd, Las Vegas, NV 89109",\n          "details": "Stunning seasonal floral displays. Must see attraction.",\n           "timings": "Open 24 hours",\n           "entryFee": "Free"\n        },\n         {\n            "name": "Bellagio Fountains",\n            "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/84/69/d2/the-bellagio-fountains.jpg?w=700&h=-1&s=1",\n             "location": "In front of the Bellagio Hotel",\n             "details":"Spectacular water shows synchronized with music and lights.",\n            "timings": "Performances every 30 minutes in the afternoon and every 15 minutes in the evening.  Check schedule for specific times.",\n            "entryFee": "Free"\n        },\n        {\n            "name": "High Roller Observation Wheel",\n            "imageUrl":"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/25/aa/61/high-roller.jpg?w=700&h=-1&s=1",\n            "location": "The LINQ Promenade, 3545 S Las Vegas Blvd, Las Vegas, NV 89109",\n            "details": "Take a ride on the tallest observation wheel in North America for amazing views of the Strip.",\n            "timings": "Generally open from 2pm to midnight. Check for specific times.",\n            "entryFee": "Approximately $30-40 per person"\n        },\n          {\n            "name": "Dinner at In-N-Out Burger",\n            "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/In-N-Out_Burger_Logo.svg/1200px-In-N-Out_Burger_Logo.svg.png",\n            "location": "Multiple locations around Las Vegas",\n             "details": "Experience a West Coast classic burger joint.",\n            "timings": "Hours vary by location, typically open late.",\n            "entryFee": "Cost of food, approximately $10-15 per person"\n          }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown & Culture",\n      "activities": [\n          {\n           "name": "Fremont Street Experience",\n             "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/b3/d3/f7/fremont-street-experience.jpg?w=700&h=-1&s=1",\n            "location": "Fremont Street, Downtown Las Vegas",\n           "details":"A pedestrian mall with a massive LED canopy and free nightly light shows. Great for a walk and some free entertainment.",\n           "timings": "Open 24 hours, Light shows run regularly in the evening. Check the schedule for specific times.",\n           "entryFee": "Free"\n          },\n          {\n            "name": "Mob Museum",\n            "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/8d/f2/3c/exterior.jpg?w=700&h=-1&s=1",\n             "location": "300 Stewart Ave, Las Vegas, NV 89101",\n             "details": "Explore the history of organized crime in America.",\n            "timings": "Open daily from 9am to 10pm",\n            "entryFee": "Approximately $30 per person"\n           },\n           {\n               "name": "Neon Museum",\n               "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/40/68/21/the-neon-museum.jpg?w=700&h=-1&s=1",\n               "location": "770 Las Vegas Blvd N, Las Vegas, NV 89101",\n                "details": "A collection of vintage Las Vegas signs.",\n               "timings":"Open from 9:00 am to 10:00 pm. Check website for availability",\n               "entryFee": "Approximately $28 per person"\n           },\n           {\n             "name":"Dinner at Carson Kitchen",\n              "imageUrl": "https://s3-media0.fl.yelpcdn.com/bphoto/T5x4d4hC3U8fGz7v7sM2Ag/o.jpg",\n              "location": "124 S 6th St #100, Las Vegas, NV 89101",\n              "details": "Enjoy great American cuisine with a modern twist.",\n             "timings": "Check website for specific timings.",\n              "entryFee": "Cost of food, approximately $30-40 per person"\n             }\n      ]\n    },\n      "day3": {\n        "theme": "Relaxation & Entertainment",\n        "activities":[\n          {\n            "name": "Pool time",\n            "imageUrl": "https://www.jetsetter.com/wp-content/uploads/2023/06/GettyImages-1436062560-1.jpg",\n            "location": "At the selected hotel",\n            "details": "Relax by the pool and enjoy some sun. Most hotels have great pool facilities.",\n             "timings":"Hotel dependent, typically open morning to late afternoon",\n            "entryFee": "Free for hotel guests."\n          },\n           {\n            "name": "Shopping at the Grand Canal Shoppes",\n             "imageUrl":"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/c5/bb/d4/grand-canal-shoppes.jpg?w=700&h=-1&s=1",\n            "location":"The Venetian, 3355 S Las Vegas Blvd, Las Vegas, NV 89109",\n            "details":"Explore the upscale shops and canals.",\n             "timings":"Typically open 10:00 am - 10:00 pm. Check for specific timings",\n            "entryFee":"Free (cost of shopping, optional)"\n           },\n          {\n            "name": "Catch a show",\n             "imageUrl":"https://media.architecturaldigest.com/photos/5645a4a2d80bf77c500b2597/16:9/w_1280,c_limit/cirque-du-soleil-las-vegas-01.jpg",\n            "location":"Various theaters on the Strip",\n            "details":"Las Vegas is known for its amazing live shows, including Cirque du Soleil. Book in advance.",\n             "timings":"Show times vary. Check for specific details",\n             "entryFee": "Cost of tickets will vary widely, typically $100+ per person"\n          },\n          {\n            "name": "Farewell Dinner at a Steakhouse",\n           "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Grilled_steak.jpg/1200px-Grilled_steak.jpg",\n           "location":"Various steakhouses on the Strip. A budget-friendly option can be found at many casinos.",\n           "details":"Enjoy a classic Las Vegas steak dinner. Do some research before to find a good place.",\n           "timings": "Dinner time, typically 5:00 pm onwards",\n           "entryFee": "Cost of food, approximately $40-60 per person"\n          }\n        ]\n      }\n  },\n  "authenticDishes": [\n    {\n      "name": "Shrimp Cocktail",\n      "imageUrl": "https://www.allrecipes.com/thmb/3f2qU_1k5wZtX0x79sT3eWzT91I=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/14678-classic-shrimp-cocktail-ddmfs-4x3-1559-e0350286f0664cb3ac9a010917e4554f.jpg",\n      "description": "A classic Vegas appetizer, often served cold with cocktail sauce."\n    },\n    {\n      "name": "Buffets",\n      "imageUrl": "https://www.foodandwine.com/thmb/Jm4Hh28_7eIeR-V-8TzV-R9v6oM=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-1413371463-b53d3e33c8b746489726a8e9037684e6.jpg",\n      "description": "Las Vegas is famous for its extravagant buffets, offering a wide variety of foods."\n    },\n    {\n      "name": "Prime Rib",\n      "imageUrl": "https://www.thespruceeats.com/thmb/5yv4dG0Wf6H7R46n0yF-H7e73-A=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/herb-roasted-prime-rib-recipe-101129-15_preview-77d116255b0d4d5599af30261730f1b9.jpeg",\n      "description": "A popular choice for dinner, often found at steakhouses and some buffets."\n    },\n        {\n          "name":"Casino Inspired Cocktails",\n          "imageUrl": "https://assets.bonappetit.com/photos/5b9f8f30b436c2694949dd00/1:1/w_2560%2Cc_limit/0918-drinks-casino-01.jpg",\n          "description": "Las Vegas is known for its unique cocktails. Each casino has its own signature drink."\n        }\n  ]\n}\n```',
        },
      ],
    },
  ],
});
